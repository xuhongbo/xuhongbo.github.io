<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> S.O.L.I.D 五大原则之单一职责 SRP · xuhongbo</title><meta name="description" content="S.O.L.I.D 五大原则之单一职责 SRP - xuhongbo"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://xuhongbo.com/atom.xml" title="xuhongbo"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">博客</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">文章列表</a></li><li class="nav-list-item"><a href="https://github.com/xuhongbo" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">S.O.L.I.D 五大原则之单一职责 SRP</h1><div class="post-info">Apr 8, 2016</div><div class="post-content"><p>Bob 大叔提出并发扬了 S.O.L.I.D 五大原则，用来更好地进行面向对象编程，五大原则分别是：</p>
<ol>
<li>The Single Responsibility Principle（单一职责 SRP）</li>
<li>The Open/Closed Principle（开闭原则 OCP）</li>
<li>The Liskov Substitution Principle（里氏替换原则 LSP）</li>
<li>The Interface Segregation Principle（接口分离原则 ISP）</li>
<li>The Dependency Inversion Principle（依赖反转原则 DIP）</li>
</ol>
<p>五大原则，我相信在博客园已经被讨论烂了，尤其是 C# 的实现，但是相对于 JavaScript 这种以原型为 base 的动态类型语言来说还为数不多，该系列将分 5 篇文章以 JavaScript 编程语言为基础来展示五大原则的应用。 OK，开始我们的第一篇：单一职责。<br><a id="more"></a></p>
<h2 id="单一职责"><a href="#单一职责" class="headerlink" title="单一职责"></a>单一职责</h2><p>单一职责的描述如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">A class should have only one reason to change</div><div class="line">类发生更改的原因应该只有一个</div></pre></td></tr></table></figure>
<p>一个类（JavaScript 下应该是一个对象）应该有一组紧密相关的行为的意思是什么？遵守单一职责的好处是可以让我们很容易地来维护这个对象，当一个对象封装了很多职责的话，一旦一个职责需要修改，势必会影响该对象想的其它职责代码。通过解耦可以让每个职责工更加有弹性地变化。</p>
<p>不过，我们如何知道一个对象的多个行为构造多个职责还是单个职责？我们可以通过参考<a href="http://www.amazon.com/Object-Design-Roles-Responsibilities-Collaborations/dp/0201379430" target="_blank" rel="external">Object Design: Roles, Responsibilies, and Collaborations</a>一书提出的 Role Stereotypes 概念来决定，该书提出了如下 Role Stereotypes 来区分职责：</p>
<ol>
<li>Information holder – 该对象设计为存储对象并提供对象信息给其它对象。</li>
<li>Structurer – 该对象设计为维护对象和信息之间的关系</li>
<li>Service provider – 该对象设计为处理工作并提供服务给其它对象</li>
<li>Controller – 该对象设计为控制决策一系列负责的任务处理</li>
<li>Coordinator – 该对象不做任何决策处理工作，只是delegate工作到其它对象上</li>
<li>Interfacer – 该对象设计为在系统的各个部分转化信息（或请求）</li>
</ol>
<p>一旦你知道了这些概念，那就狠容易知道你的代码到底是多职责还是单一职责了。</p>
<h2 id="实例代码"><a href="#实例代码" class="headerlink" title="实例代码"></a>实例代码</h2><p>该实例代码演示的是将商品添加到购物车，代码非常糟糕，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">function Product(id, description) &#123;</div><div class="line">    this.getId = function () &#123;</div><div class="line">        return id;</div><div class="line">    &#125;;</div><div class="line">    this.getDescription = function () &#123;</div><div class="line">        return description;</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line">function Cart(eventAggregator) &#123;</div><div class="line">    var items = [];</div><div class="line">    this.addItem = function (item) &#123;</div><div class="line">        items.push(item);</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line">(function () &#123;</div><div class="line">    var products = [new Product(1, &quot;Star Wars Lego Ship&quot;),</div><div class="line">            new Product(2, &quot;Barbie Doll&quot;),</div><div class="line">            new Product(3, &quot;Remote Control Airplane&quot;)],</div><div class="line">cart = new Cart();</div><div class="line">    function addToCart() &#123;</div><div class="line">        var productId = $(this).attr(&apos;id&apos;);</div><div class="line">        var product = $.grep(products, function (x) &#123;</div><div class="line">            return x.getId() == productId;</div><div class="line">        &#125;)[0];</div><div class="line">        cart.addItem(product);</div><div class="line">        var newItem = $(&apos;&lt;li&gt;&lt;/li&gt;&apos;).html(product.getDescription()).attr(&apos;id-cart&apos;, product.getId()).appendTo(&quot;#cart&quot;);</div><div class="line">    &#125;</div><div class="line">    products.forEach(function (product) &#123;</div><div class="line">        var newItem = $(&apos;&lt;li&gt;&lt;/li&gt;&apos;).html(product.getDescription())</div><div class="line">                                    .attr(&apos;id&apos;, product.getId())</div><div class="line">                                    .dblclick(addToCart)</div><div class="line">                                    .appendTo(&quot;#products&quot;);</div><div class="line">    &#125;);</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<p>该代码声明了 2 个 function 分别用来描述 product 和 cart，而匿名函数的职责是更新屏幕和用户交互，这还不是一个很复杂的例子，但匿名函数里却包含了很多不相关的职责，让我们来看看到底有多少职责：</p>
<ol>
<li>首先，有 product 的集合的声明</li>
<li>其次，有一个将 product 集合绑定到 #product 元素的代码，而且还附件了一个添加到购物车的事件处理</li>
<li>第三，有 Cart 购物车的展示功能</li>
<li>第四，有添加 product item 到购物车并显示的功能</li>
</ol>
<h2 id="重构代码"><a href="#重构代码" class="headerlink" title="重构代码"></a>重构代码</h2><p>让我们来分解一下，以便代码各自存放到各自的对象里，为此，我们参考了 martinfowler 的事件聚合（Event Aggregator）理论在处理代码以便各对象之间进行通信。</p>
<p>首先我们先来实现事件聚合的功能，该功能分为 2 部分，1 个是 Event，用于 Handler 回调的代码，1 个是 EventAggregator 用来订阅和发布 Event，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">function Event(name) &#123;</div><div class="line">    var handlers = [];</div><div class="line">    this.getName = function () &#123;</div><div class="line">        return name;</div><div class="line">    &#125;;</div><div class="line">    this.addHandler = function (handler) &#123;</div><div class="line">        handlers.push(handler);</div><div class="line">    &#125;;</div><div class="line">    this.removeHandler = function (handler) &#123;</div><div class="line">        for (var i = 0; i &lt; handlers.length; i++) &#123;</div><div class="line">            if (handlers[i] == handler) &#123;</div><div class="line">                handlers.splice(i, 1);</div><div class="line">                break;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    this.fire = function (eventArgs) &#123;</div><div class="line">        handlers.forEach(function (h) &#123;</div><div class="line">            h(eventArgs);</div><div class="line">        &#125;);</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line">function EventAggregator() &#123;</div><div class="line">    var events = [];</div><div class="line">    function getEvent(eventName) &#123;</div><div class="line">        return $.grep(events, function (event) &#123;</div><div class="line">            return event.getName() === eventName;</div><div class="line">        &#125;)[0];</div><div class="line">    &#125;</div><div class="line">    this.publish = function (eventName, eventArgs) &#123;</div><div class="line">        var event = getEvent(eventName);</div><div class="line">        if (!event) &#123;</div><div class="line">            event = new Event(eventName);</div><div class="line">            events.push(event);</div><div class="line">        &#125;</div><div class="line">        event.fire(eventArgs);</div><div class="line">    &#125;;</div><div class="line">    this.subscribe = function (eventName, handler) &#123;</div><div class="line">        var event = getEvent(eventName);</div><div class="line">        if (!event) &#123;</div><div class="line">            event = new Event(eventName);</div><div class="line">            events.push(event);</div><div class="line">        &#125;</div><div class="line">        event.addHandler(handler);</div><div class="line">    &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>然后，我们来声明 Product 对象，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">function Product(id, description) &#123;</div><div class="line">    this.getId = function () &#123;</div><div class="line">        return id;</div><div class="line">    &#125;;</div><div class="line">    this.getDescription = function () &#123;</div><div class="line">        return description;</div><div class="line">    &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>接着来声明 Cart 对象，该对象的 addItem 的 function 里我们要触发发布一个事件 itemAdded，然后将 item 作为参数传进去。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">function Cart(eventAggregator) &#123;</div><div class="line">    var items = [];</div><div class="line">    this.addItem = function (item) &#123;</div><div class="line">        items.push(item);</div><div class="line">        eventAggregator.publish(&quot;itemAdded&quot;, item);</div><div class="line">    &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>CartController 主要是接受 cart 对象和事件聚合器，通过订阅 itemAdded 来增加一个 li 元素节点，通过订阅 productSelected 事件来添加 product。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">function CartController(cart, eventAggregator) &#123;</div><div class="line">    eventAggregator.subscribe(&quot;itemAdded&quot;, function (eventArgs) &#123;</div><div class="line">        var newItem = $(&apos;&lt;li&gt;&lt;/li&gt;&apos;).html(eventArgs.getDescription()).attr(&apos;id-cart&apos;, eventArgs.getId()).appendTo(&quot;#cart&quot;);</div><div class="line">    &#125;);</div><div class="line">    eventAggregator.subscribe(&quot;productSelected&quot;, function (eventArgs) &#123;</div><div class="line">        cart.addItem(eventArgs.product);</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Repository 的目的是为了获取数据（可以从 ajax 里获取），然后暴露 get 数据的方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">function ProductRepository() &#123;</div><div class="line">    var products = [new Product(1, &quot;Star Wars Lego Ship&quot;),</div><div class="line">            new Product(2, &quot;Barbie Doll&quot;),</div><div class="line">            new Product(3, &quot;Remote Control Airplane&quot;)];</div><div class="line">    this.getProducts = function () &#123;</div><div class="line">        return products;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ProductController 里定义了一个 onProductSelect 方法，主要是发布触发 productSelected 事件，forEach 主要是用于绑定数据到产品列表上，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">function ProductController(eventAggregator, productRepository) &#123;</div><div class="line">    var products = productRepository.getProducts();</div><div class="line">    function onProductSelected() &#123;</div><div class="line">        var productId = $(this).attr(&apos;id&apos;);</div><div class="line">        var product = $.grep(products, function (x) &#123;</div><div class="line">            return x.getId() == productId;</div><div class="line">        &#125;)[0];</div><div class="line">        eventAggregator.publish(&quot;productSelected&quot;, &#123;</div><div class="line">            product: product</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">    products.forEach(function (product) &#123;</div><div class="line">        var newItem = $(&apos;&lt;li&gt;&lt;/li&gt;&apos;).html(product.getDescription())</div><div class="line">                                    .attr(&apos;id&apos;, product.getId())</div><div class="line">                                    .dblclick(onProductSelected)</div><div class="line">                                    .appendTo(&quot;#products&quot;);</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>最后声明匿名函数（需要确保 HTML 都加载完了才能执行这段代码，比如放在 jQuery 的 ready 方法里）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">(function () &#123;</div><div class="line">    var eventAggregator = new EventAggregator(),</div><div class="line">cart = new Cart(eventAggregator),</div><div class="line">cartController = new CartController(cart, eventAggregator),</div><div class="line">productRepository = new ProductRepository(),</div><div class="line">productController = new ProductController(eventAggregator, productRepository);</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<p>可以看到匿名函数的代码减少了很多，主要是一个对象的实例化代码，代码里我们介绍了 Controller 的概念，他接受信息然后传递到 action，我们也介绍了 Repository 的概念，主要是用来处理 product 的展示，重构的结果就是写了一大堆的对象声明，但是好处是每个对象有了自己明确的职责，该展示数据的展示数据，改处理集合的处理集合，这样耦合度就非常低了。</p>
<p>最终代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div></pre></td><td class="code"><pre><div class="line">function Event(name) &#123;</div><div class="line">    var handlers = [];</div><div class="line">    this.getName = function () &#123;</div><div class="line">        return name;</div><div class="line">    &#125;;</div><div class="line">    this.addHandler = function (handler) &#123;</div><div class="line">        handlers.push(handler);</div><div class="line">    &#125;;</div><div class="line">    this.removeHandler = function (handler) &#123;</div><div class="line">        for (var i = 0; i &lt; handlers.length; i++) &#123;</div><div class="line">            if (handlers[i] == handler) &#123;</div><div class="line">                handlers.splice(i, 1);</div><div class="line">                break;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    this.fire = function (eventArgs) &#123;</div><div class="line">        handlers.forEach(function (h) &#123;</div><div class="line">            h(eventArgs);</div><div class="line">        &#125;);</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line">function EventAggregator() &#123;</div><div class="line">    var events = [];</div><div class="line">    function getEvent(eventName) &#123;</div><div class="line">        return $.grep(events, function (event) &#123;</div><div class="line">            return event.getName() === eventName;</div><div class="line">        &#125;)[0];</div><div class="line">    &#125;</div><div class="line">    this.publish = function (eventName, eventArgs) &#123;</div><div class="line">        var event = getEvent(eventName);</div><div class="line">        if (!event) &#123;</div><div class="line">            event = new Event(eventName);</div><div class="line">            events.push(event);</div><div class="line">        &#125;</div><div class="line">        event.fire(eventArgs);</div><div class="line">    &#125;;</div><div class="line">    this.subscribe = function (eventName, handler) &#123;</div><div class="line">        var event = getEvent(eventName);</div><div class="line">        if (!event) &#123;</div><div class="line">            event = new Event(eventName);</div><div class="line">            events.push(event);</div><div class="line">        &#125;</div><div class="line">        event.addHandler(handler);</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line">function Product(id, description) &#123;</div><div class="line">    this.getId = function () &#123;</div><div class="line">        return id;</div><div class="line">    &#125;;</div><div class="line">    this.getDescription = function () &#123;</div><div class="line">        return description;</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line">function Cart(eventAggregator) &#123;</div><div class="line">    var items = [];</div><div class="line">    this.addItem = function (item) &#123;</div><div class="line">        items.push(item);</div><div class="line">        eventAggregator.publish(&quot;itemAdded&quot;, item);</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line">function CartController(cart, eventAggregator) &#123;</div><div class="line">    eventAggregator.subscribe(&quot;itemAdded&quot;, function (eventArgs) &#123;</div><div class="line">        var newItem = $(&apos;&lt;li&gt;&lt;/li&gt;&apos;).html(eventArgs.getDescription()).attr(&apos;id-cart&apos;, eventArgs.getId()).appendTo(&quot;#cart&quot;);</div><div class="line">    &#125;);</div><div class="line">    eventAggregator.subscribe(&quot;productSelected&quot;, function (eventArgs) &#123;</div><div class="line">        cart.addItem(eventArgs.product);</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line">function ProductRepository() &#123;</div><div class="line">    var products = [new Product(1, &quot;Star Wars Lego Ship&quot;),</div><div class="line">    new Product(2, &quot;Barbie Doll&quot;),</div><div class="line">    new Product(3, &quot;Remote Control Airplane&quot;)];</div><div class="line">    this.getProducts = function () &#123;</div><div class="line">        return products;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">function ProductController(eventAggregator, productRepository) &#123;</div><div class="line">    var products = productRepository.getProducts();</div><div class="line">    function onProductSelected() &#123;</div><div class="line">        var productId = $(this).attr(&apos;id&apos;);</div><div class="line">        var product = $.grep(products, function (x) &#123;</div><div class="line">            return x.getId() == productId;</div><div class="line">        &#125;)[0];</div><div class="line">        eventAggregator.publish(&quot;productSelected&quot;, &#123;</div><div class="line">            product: product</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">    products.forEach(function (product) &#123;</div><div class="line">        var newItem = $(&apos;&lt;li&gt;&lt;/li&gt;&apos;).html(product.getDescription())</div><div class="line">                            .attr(&apos;id&apos;, product.getId())</div><div class="line">                            .dblclick(onProductSelected)</div><div class="line">                            .appendTo(&quot;#products&quot;);</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line">(function () &#123;</div><div class="line">    var eventAggregator = new EventAggregator(),</div><div class="line">        cart = new Cart(eventAggregator),</div><div class="line">        cartController = new CartController(cart, eventAggregator),</div><div class="line">        productRepository = new ProductRepository(),</div><div class="line">        productController = new ProductController(eventAggregator, productRepository);</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>如果你的项目是个是个非常小的项目，代码也不是很多，那其实是没有必要重构得这么复杂，但如果你的项目是个很复杂的大型项目，或者你的小项目将来可能增长得很快的话，那就在前期就得考虑 SRP 原则进行职责分离了，这样才有利于以后的维护。</p>
</div></article></div></main><footer><div class="paginator"><a href="/2016/04/12/深入理解javascript/28设计模式之工厂模式/" class="prev">PREV</a><a href="/2016/04/05/深入理解javascript/26设计模式之构造函数模式/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'xuxiaowo';
var disqus_identifier = '2016/04/08/深入理解javascript/6S.O.L.I.D 五大原则之单一职责 SRP/';
var disqus_title = 'S.O.L.I.D 五大原则之单一职责 SRP';
var disqus_url = 'http://xuhongbo.com/2016/04/08/深入理解javascript/6S.O.L.I.D 五大原则之单一职责 SRP/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//xuxiaowo.disqus.com/count.js" async></script><div class="copyright"><p>© 2014 - 2017 <a href="https://github.com/xuhongbo" target="_blank">xuhongbo-github</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>